<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: DetailedPipeline Pages: 1 -->
<svg width="297pt" height="516pt"
 viewBox="0.00 0.00 296.50 516.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 512)">
<title>DetailedPipeline</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-512 292.5,-512 292.5,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_gemini</title>
<polygon fill="white" stroke="black" points="49.5,-160 49.5,-322 263.5,-322 263.5,-160 49.5,-160"/>
<text text-anchor="middle" x="156.5" y="-306.8" font-family="Times,serif" font-size="14.00">Gemini API (Two&#45;Stage)</text>
</g>
<!-- User -->
<g id="node1" class="node">
<title>User</title>
<polygon fill="lightgrey" stroke="black" points="156.5,-508 24.5,-470 156.5,-432 288.5,-470 156.5,-508"/>
<polyline fill="none" stroke="black" points="36.03,-473.32 36.03,-466.68 "/>
<polyline fill="none" stroke="black" points="144.97,-435.32 168.03,-435.32 "/>
<polyline fill="none" stroke="black" points="276.97,-466.68 276.97,-473.32 "/>
<polyline fill="none" stroke="black" points="168.03,-504.68 144.97,-504.68 "/>
<text text-anchor="middle" x="156.5" y="-473.8" font-family="Verdana" font-size="14.00">User Upload</text>
<text text-anchor="middle" x="156.5" y="-458.8" font-family="Verdana" font-size="14.00">(PNG + .prompt)</text>
</g>
<!-- Compiler -->
<g id="node2" class="node">
<title>Compiler</title>
<polygon fill="lightblue" stroke="black" points="216.5,-395 96.5,-395 96.5,-359 216.5,-359 216.5,-395"/>
<text text-anchor="middle" x="156.5" y="-373.3" font-family="Verdana" font-size="14.00">SpriteCompiler</text>
</g>
<!-- User&#45;&gt;Compiler -->
<g id="edge2" class="edge">
<title>User&#45;&gt;Compiler</title>
<path fill="none" stroke="black" d="M156.5,-431.99C156.5,-422.99 156.5,-413.54 156.5,-405.1"/>
<polygon fill="black" stroke="black" points="160,-405.06 156.5,-395.06 153,-405.06 160,-405.06"/>
</g>
<!-- S1 -->
<g id="node3" class="node">
<title>S1</title>
<polygon fill="lightpink" stroke="black" points="255.5,-291 57.5,-291 57.5,-253 255.5,-253 255.5,-291"/>
<text text-anchor="middle" x="156.5" y="-275.8" font-family="Verdana" font-size="14.00">Stage 1: Creative Analysis</text>
<text text-anchor="middle" x="156.5" y="-260.8" font-family="Verdana" font-size="14.00">(Gemini 2.5&#45;Flash)</text>
</g>
<!-- Compiler&#45;&gt;S1 -->
<g id="edge3" class="edge">
<title>Compiler&#45;&gt;S1</title>
<path fill="none" stroke="black" d="M156.5,-358.99C156.5,-343.32 156.5,-319.78 156.5,-301.28"/>
<polygon fill="black" stroke="black" points="160,-301.07 156.5,-291.07 153,-301.07 160,-301.07"/>
<text text-anchor="middle" x="197" y="-333" font-family="Verdana" font-size="10.00">Image + Prompt</text>
</g>
<!-- S2 -->
<g id="node4" class="node">
<title>S2</title>
<polygon fill="lightpink" stroke="black" points="252.5,-206 60.5,-206 60.5,-168 252.5,-168 252.5,-206"/>
<text text-anchor="middle" x="156.5" y="-190.8" font-family="Verdana" font-size="14.00">Stage 2: Structured JSON</text>
<text text-anchor="middle" x="156.5" y="-175.8" font-family="Verdana" font-size="14.00">(Gemini 3 Pro)</text>
</g>
<!-- S1&#45;&gt;S2 -->
<g id="edge1" class="edge">
<title>S1&#45;&gt;S2</title>
<path fill="none" stroke="black" d="M156.5,-252.99C156.5,-242.3 156.5,-228.5 156.5,-216.37"/>
<polygon fill="black" stroke="black" points="160,-216.26 156.5,-206.26 153,-216.26 160,-216.26"/>
<text text-anchor="middle" x="186" y="-227" font-family="Verdana" font-size="10.00">Vibrant Text</text>
</g>
<!-- Validation -->
<g id="node5" class="node">
<title>Validation</title>
<polygon fill="lightgrey" stroke="black" points="163.5,-121 15.5,-121 15.5,-85 163.5,-85 163.5,-121"/>
<text text-anchor="middle" x="89.5" y="-99.3" font-family="Verdana" font-size="14.00">Pydantic Validation</text>
</g>
<!-- S2&#45;&gt;Validation -->
<g id="edge4" class="edge">
<title>S2&#45;&gt;Validation</title>
<path fill="none" stroke="black" d="M141.63,-167.8C132.27,-156.34 120.06,-141.41 109.81,-128.86"/>
<polygon fill="black" stroke="black" points="112.45,-126.56 103.41,-121.03 107.03,-130.99 112.45,-126.56"/>
<text text-anchor="middle" x="151" y="-142" font-family="Verdana" font-size="10.00">Raw JSON</text>
</g>
<!-- Fixup -->
<g id="node6" class="node">
<title>Fixup</title>
<polygon fill="none" stroke="black" stroke-dasharray="5,2" points="268,-38 131,-38 131,0 268,0 268,-38"/>
<text text-anchor="middle" x="199.5" y="-22.8" font-family="Verdana" font-size="14.00">MetaFixupPrompt</text>
<text text-anchor="middle" x="199.5" y="-7.8" font-family="Verdana" font-size="14.00">(Logic Retry)</text>
</g>
<!-- Validation&#45;&gt;Fixup -->
<g id="edge6" class="edge">
<title>Validation&#45;&gt;Fixup</title>
<path fill="none" stroke="red" d="M112.56,-84.81C128.37,-73.03 149.57,-57.22 167.07,-44.17"/>
<polygon fill="red" stroke="red" points="169.4,-46.8 175.33,-38.02 165.22,-41.19 169.4,-46.8"/>
<text text-anchor="middle" x="167" y="-59" font-family="Verdana" font-size="10.00">Fail ❌</text>
</g>
<!-- Storage -->
<g id="node7" class="node">
<title>Storage</title>
<polygon fill="lightyellow" stroke="black" points="113,-38 110,-42 89,-42 86,-38 0,-38 0,0 113,0 113,-38"/>
<text text-anchor="middle" x="56.5" y="-22.8" font-family="Verdana" font-size="14.00">.prompt.json</text>
<text text-anchor="middle" x="56.5" y="-7.8" font-family="Verdana" font-size="14.00">(Asset Folder)</text>
</g>
<!-- Validation&#45;&gt;Storage -->
<g id="edge5" class="edge">
<title>Validation&#45;&gt;Storage</title>
<path fill="none" stroke="green" d="M76.45,-84.91C72.77,-79.43 69.08,-73.17 66.5,-67 64.07,-61.18 62.2,-54.7 60.78,-48.46"/>
<polygon fill="green" stroke="green" points="64.15,-47.46 58.78,-38.33 57.28,-48.82 64.15,-47.46"/>
<text text-anchor="middle" x="94" y="-59" font-family="Verdana" font-size="10.00">Success ✅</text>
</g>
<!-- Fixup&#45;&gt;S2 -->
<g id="edge7" class="edge">
<title>Fixup&#45;&gt;S2</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M199.06,-38.26C197.91,-63.97 193.84,-111.97 179.5,-150 178.35,-153.05 176.91,-156.12 175.33,-159.11"/>
<polygon fill="black" stroke="black" points="172.31,-157.34 170.24,-167.73 178.34,-160.89 172.31,-157.34"/>
<text text-anchor="middle" x="228" y="-100.5" font-family="Verdana" font-size="10.00">Retry w/ Error</text>
</g>
</g>
</svg>
